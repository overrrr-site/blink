# UI Design Guidelines レビュー

## 優先度: 高（最重要レビュー対象）

---

## 1. Dashboard.tsx（ダッシュボード）

### 良い点
- フィルター機能が明確なタブUIで実装されている
- アイコンとラベルの組み合わせが適切（色+アイコン+テキスト）
- 展開/折りたたみUIがキーボード操作にも対応（onKeyDown）
- aria-label、aria-pressed属性を使用したアクセシビリティ対応
- EmptyStateコンポーネントで空状態を適切に表示

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **タップターゲット不足** | 168-181行 | フィルターボタンのpy-2（8px）は小さすぎる。最小48pxのタップターゲットを確保するため `py-3` または `min-h-[48px]` に変更 |
| **ステータスバッジの色のみ依存** | 338-352行 | ステータス表示が色のみで区別されている箇所がある。アイコンは追加されているが、より明確にするため枠線やアンダーラインを追加検討 |
| **フォントウェイトの多用** | 複数箇所 | `font-bold`と`font-medium`の使い分けが多い。2種類以内に統一することを推奨 |
| **チェックインボタンのコントラスト** | 277行 | `bg-chart-4 text-white`のコントラスト比を確認必要。chart-4の色定義次第でWCAG AA基準を満たさない可能性 |
| **アラートバナーのタップ領域** | 396-438行 | ボタン全体がタップ可能だが、48px以上の高さを確保しているか確認必要 |

### コード例（タップターゲット修正）
```tsx
// Before (168行)
className={`flex-1 py-2 px-2 rounded-lg...`}

// After
className={`flex-1 py-3 px-2 rounded-lg min-h-[48px]...`}
```

---

## 2. JournalCreate.tsx（日誌作成画面）

### 良い点
- ステップインジケーターで進行状況が明確
- AIコメント生成ボタンが視覚的に目立つグラデーション背景
- 写真解析中のフィードバック（スピナー+テキスト）が適切
- トレーニング記録の○/△/−選択がシンプルで分かりやすい

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **ステップボタンのタップターゲット不足** | 409-426行 | ステップインジケーターのボタンが小さい（py-1.5）。`min-h-[48px]`を追加 |
| **トレーニング選択ボタンが小さい** | 711-722行 | `size-7`（28px）は最小48pxタップターゲットを満たさない。`size-10`以上に拡大 |
| **写真削除ボタンの視認性** | 472-478行 | `opacity-0 group-hover:opacity-100`はモバイルでhoverが効かない。常に表示するか、タップで表示に変更 |
| **行間が1.5未満** | 536-541行 | textareaのline-heightが指定されていない。`leading-relaxed`（1.625）を追加 |
| **「詳細をスキップ」の視認性** | 798-807行 | テキストのみのボタンだが、タップ領域が小さい可能性。`py-3 min-h-[48px]`を追加 |

### コード例（トレーニングボタン修正）
```tsx
// Before (715行)
className={`size-7 rounded-full...`}

// After
className={`size-10 rounded-full...`}
```

---

## 3. ReservationCreate.tsx（予約作成・編集画面）

### 良い点
- StepIndicatorコンポーネントでステップが明確
- 閉じるボタンに48pxのタップターゲット確保（min-w-[48px] min-h-[48px]）
- フォーム構造がシンプルでステップ分割が適切

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **ステップ遷移時のフィードバック不足** | 78-83行 | `alert()`でのエラー表示はユーザー体験が悪い。インラインエラー表示に変更推奨 |
| **コンポーネント内部の確認必要** | - | StepIndicator、DateTimeStep等のサブコンポーネントの詳細レビューが必要 |

---

## 4. Customers.tsx（顧客一覧・検索画面）

### 良い点
- 検索バーにクリアボタンを配置
- 表示切り替えタブがaria-label、aria-pressedに対応
- EmptyStateコンポーネントで空状態を適切に表示
- 統計カードで情報を視覚的に表示

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **タブボタンのタップターゲット** | 124-150行 | `py-2`は8px。`py-3 min-h-[48px]`に変更 |
| **顧客カードのタップ領域** | 185-232行 | p-4（16px）で十分だが、全体の高さが48px以上か確認 |
| **犬写真の重なり表示** | 199-225行 | `-ml-2`で写真が重なるが、タップ不可なら問題なし。タップ可能にする場合は個別のタップ領域確保必要 |
| **検索入力のborder-2** | 109行 | `border-2 border-transparent`から`focus:border-primary`への変化は良いが、デフォルト状態でborder-borderを使用し一貫性を保つべき |

---

## 5. Settings.tsx（設定画面）

### 良い点
- タブナビゲーションが明確
- トグルUIが視覚的に分かりやすい
- モーダルダイアログが適切に実装
- ツールチップでヘルプ情報を提供

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **タブボタンのタップターゲット** | 461-474行 | `py-2 px-2`は小さい。`min-h-[48px]`を追加 |
| **トグルボタンのサイズ** | 840-852行 | `w-12 h-7`（48x28px）は高さ28pxで不足。`h-8`（32px）以上に変更し、タップ領域を48px以上確保 |
| **削除ボタンの視認性** | 618-622行 | `opacity-0 group-hover:opacity-100`はモバイルで問題。常に表示するか別の方法を検討 |
| **モーダルの閉じるボタン** | 1051-1056行 | `size-8`（32px）は48pxを下回る。`size-12`に拡大 |
| **数値入力フィールド** | 540-546行 | `w-20`は小さい場合あり。最小幅を確保 |
| **confirm()の使用** | 122行など | `confirm()`はユーザー体験が悪い。カスタムモーダルに置き換え推奨 |

### コード例（トグルサイズ修正）
```tsx
// Before
className={`w-12 h-7 rounded-full...`}
<span className={`...size-5...`}></span>

// After
className={`w-14 h-8 rounded-full...`}
<span className={`...size-6...`}></span>
```

---

## 6. PreVisitInput.tsx（登園前入力画面 - LIFF）

### 良い点
- CheckboxItemコンポーネントが明確で再利用可能
- min-h-[56px]でタップターゲットを確保
- active:scale効果でタップフィードバックを提供
- aria-describedby、aria-busyなどアクセシビリティ対応

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **戻るボタンの視覚的フィードバック** | 133-139行 | `active:bg-muted`のみ。hover状態も追加推奨（PCアクセス時用） |
| **select要素のスタイル** | 206-219行 | min-h-[52px]は良いが、デフォルトのselect arrowがカスタマイズされていない。統一感のあるアイコン追加推奨 |
| **セクション間のスペーシング** | 161行 | `space-y-6`（24px）は適切。しかしフォーム内の要素間は`space-y-4`（16px）で関連性を示すべき箇所あり |

### 全体的に優秀
このファイルはモバイル最適化が最も適切に行われている好例。

---

## 7. ReservationCreate.tsx（LIFF版予約作成画面）

### 良い点
- 戻るボタンに48pxタップターゲット確保
- シンプルなフォーム構造
- コンポーネント分割が適切

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **サブコンポーネントのレビュー必要** | - | DogSelectSection、ReservationFormFields、ReservationFooterの詳細確認が必要 |
| **pb-36（144px）のpadding-bottom** | 25行 | 固定フッター用のスペースだが、safe-area-inset-bottomも考慮すべき |

---

## 共通の改善点まとめ

### 1. タップターゲット（最重要）
多くのボタンが48x48pxの最小タップターゲットを満たしていない。
- フィルタータブ: py-2 → min-h-[48px]
- トグルスイッチ: h-7 → h-8以上
- 削除/閉じるボタン: size-7/8 → size-12

### 2. モバイルでのhover依存
`opacity-0 group-hover:opacity-100`パターンがモバイルでは機能しない。
代替案:
- 常に表示（opacity-70程度）
- スワイプで表示
- 長押しメニュー

### 3. confirm()/alert()の置き換え
ネイティブダイアログはユーザー体験が悪い。カスタムモーダルに統一推奨。

### 4. フォントウェイトの統一
現状: font-normal, font-medium, font-semibold, font-bold が混在
推奨: font-normal（400）とfont-bold（700）の2種類に統一

### 5. スペーシングの8pxグリッド確認
一部で12px（gap-3）や20px（size-5）など8pxグリッドから外れた値あり。
可能な限り8, 16, 24, 32, 48pxに統一。

### 6. 色以外の視覚的手がかり
ステータス表示で色のみに依存している箇所がある。
アイコン、下線、枠線などを追加して色覚多様性に配慮。

---

---

## 優先度: 中（重要レビュー対象）

---

## 8. ReservationsCalendar.tsx（予約カレンダー画面）

### 良い点
- 月送りボタンが44x44pxのタップターゲット確保（min-w-[44px] min-h-[44px]）
- aria-label属性の適切な使用
- ドラッグ&ドロップ機能の視覚フィードバック（border-dashed）
- 空状態の適切な表示

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **月送りボタンが44px** | 169-189行 | 44pxは許容範囲だが、48pxに統一推奨（min-w-[48px] min-h-[48px]） |
| **カレンダー日付セルのタップ領域** | 236-241行 | min-h-[44px]は良いが、48pxに統一推奨 |
| **alert()の使用** | 139行 | カスタムモーダルに置き換え推奨 |
| **曜日ヘッダーのfont-semibold** | 196行 | フォントウェイト統一のため`font-bold`または`font-medium`に変更 |

---

## 9. DogDetail.tsx（犬詳細画面）

### 良い点
- 戻るボタン・編集ボタンが48pxタップターゲット確保
- セクション分けが明確（基本情報/健康情報/性格/契約/履歴）
- aria-label属性の使用

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **編集ボタンが44px** | 47行 | `min-h-[44px]`は許容範囲だが、48pxに統一推奨 |
| **タブ切り替えコンポーネント** | 126-133行 | HistoryTabsコンポーネントのタップターゲット確認必要 |

### 全体的に良好
シンプルで情報階層が明確。

---

## 10. OwnerDetail.tsx（飼い主詳細画面）

### 良い点
- 戻るボタンが48pxタップターゲット確保
- 電話番号・メールのリンクが適切
- 犬が1匹の場合と複数匹の場合で表示を変更

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **犬カード（複数）のタップ領域** | 145-169行 | `min-w-[100px]`だが高さの指定なし。`min-h-[100px]`追加推奨 |
| **戻るボタンのaria-label不足** | 48-52行 | `aria-label="戻る"`を追加 |

---

## 11. JournalList.tsx（日誌一覧画面）

### 良い点
- 検索バーにクリアボタン配置
- aria-label属性の使用
- 日付グループ化表示
- CSV/PDFエクスポートのドロップダウンUI

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **エクスポートボタンのタップターゲット** | 181-187行 | `py-2`（8px）は小さい。`min-h-[44px]`追加 |
| **犬フィルターチップのタップターゲット** | 253-275行 | `py-1.5`（6px）は小さい。`py-2 min-h-[44px]`に変更 |
| **alert()の使用** | 161行 | カスタムモーダルに置き換え推奨 |

---

## 12. JournalDetail.tsx（日誌詳細画面）

### 良い点
- セクション分けが明確（トイレ/コメント/担当）
- 編集モードの切り替えがスムーズ

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **戻るボタンのタップ領域** | 74-80行 | `p-2`（8px）は小さい。`min-w-[48px] min-h-[48px]`を追加 |
| **編集/保存ボタン** | 84-106行 | `py-2`は小さい。`min-h-[44px]`追加 |
| **select要素のタップ領域** | 161-180行 | `py-2`は小さい。`min-h-[44px]`追加 |
| **alert()の使用** | 50行 | カスタムモーダルに置き換え推奨 |
| **写真ギャラリーなし** | - | journal.photosの表示がない。追加検討 |

---

## 13. Billing.tsx（決済・プラン管理画面）

### 良い点
- 戻るボタンが48pxタップターゲット確保
- タブUIが明確
- エラー状態の適切な表示
- ステータスバッジが色+テキストで表現

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **タブボタンのタップターゲット** | 176-205行 | `py-2.5`（10px）は許容範囲だが、`min-h-[48px]`追加推奨 |
| **confirm()の使用** | 80, 113行 | カスタムモーダルに置き換え推奨 |
| **alert()の使用** | 95, 101, 108, 117, 121行 | トースト通知に置き換え推奨 |
| **プラン選択ボタン** | 305-311行 | `py-2.5`は許容範囲だが、`min-h-[48px]`追加推奨 |

---

## 14. Help.tsx（ヘルプページ）

### 良い点
- 戻るボタンが48pxタップターゲット確保
- 検索機能の実装
- アコーディオンUIが適切
- ステップ表示のナンバリングが視覚的に明確

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **セクションヘッダーのタップ領域** | 288-300行 | `py-4`（16px）は良いが、`min-h-[56px]`追加で確実に |
| **質問ボタンのタップ領域** | 309-318行 | `py-3`（12px）は許容範囲だが、`min-h-[48px]`追加推奨 |
| **メール送信ボタン** | 355-361行 | `py-3`（12px）で十分だが、`min-h-[48px]`追加で確実に |

### 全体的に良好
情報構造が明確で使いやすい。

---

## 優先度: 低（LIFF・共通コンポーネント）

---

## 15. Home.tsx（LIFFホーム画面）

### 良い点
- MenuCardコンポーネントでmin-h-[140px]確保
- active:scale効果でタップフィードバック
- aria-label属性の使用
- 次回予約情報の視覚的な強調

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **クイックアクションボタン** | 272-289行 | `py-3`（12px）は良いが、`min-h-[48px]`追加で確実に |
| **alert()の使用** | 254行 | トースト通知またはモーダルに置き換え推奨 |
| **犬の写真オーバーレイ** | 163-177行 | 写真がタップ不可なら問題なし |

### 全体的に優秀
モバイル最適化が適切。

---

## 16. JournalList.tsx（LIFF日誌一覧画面）

### 良い点
- 戻る・更新ボタンが48pxタップターゲット確保
- aria-label属性の使用
- active:scale効果でタップフィードバック

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **日誌カードのタップ領域** | 113-181行 | p-4（16px）で十分だが、`min-h-[80px]`追加で確実に |

### 全体的に優秀
モバイル最適化が適切。

---

## 17. JournalDetail.tsx（LIFF日誌詳細画面）

### 良い点
- 戻るボタンが48pxタップターゲット確保
- セクション分けが明確
- トイレ情報が色+アイコンで視覚的に表現

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **特になし** | - | 全体的に良好 |

### 全体的に優秀

---

## 18. Layout.tsx（レイアウト・ナビゲーション）

### 良い点
- ナビゲーションボタンが64x56pxで十分なタップ領域
- FABボタンが56x56pxで十分なタップ領域
- aria-label、aria-current属性の使用
- アクティブ状態が背景色+フォントウェイトで表現

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **FABメニューボタン** | 96-113行 | `min-h-[44px]`は確保されているが、48pxに統一推奨 |
| **FABの閉じる時のrotate-45** | 148-152行 | アイコンを×に変更するのがより直感的 |

### 全体的に良好

---

## 19. OnboardingGuide.tsx / GuideTooltip.tsx

### 良い点
- オーバーレイでターゲット要素をハイライト
- スクロール位置の自動調整
- ステップ表示が明確

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **スキップボタンのタップ領域** | GuideTooltip 183-188行 | `py-2.5`（10px）は許容範囲だが、`min-h-[44px]`追加 |
| **次へ/完了ボタン** | GuideTooltip 191-204行 | 同上 |

### 全体的に良好

---

## 20. Login.tsx（ログイン画面）

### 良い点
- フォーム入力フィールドが適切なサイズ
- アイコン+ラベルの組み合わせ
- エラー表示が明確

### 改善すべき点

| 問題 | 該当行 | 修正提案 |
|------|--------|----------|
| **Googleログインボタン** | 59-84行 | `py-3`で十分だが、`min-h-[48px]`追加で確実に |
| **メールログインボタン** | 132-138行 | 同上 |
| **パスワード表示/非表示トグルなし** | 121-129行 | パスワード表示切り替え機能の追加を検討 |

---

# 総合レビュー結果

## スコアカード

| カテゴリ | スコア | コメント |
|----------|--------|----------|
| タップターゲット | ⭐⭐⭐ | 多くの画面で改善必要（44px→48px統一） |
| アクセシビリティ | ⭐⭐⭐⭐ | aria属性の使用が適切 |
| コントラスト | ⭐⭐⭐⭐ | 一部確認必要だが概ね良好 |
| 視覚的階層 | ⭐⭐⭐⭐⭐ | 明確で一貫性あり |
| スペーシング | ⭐⭐⭐⭐ | 概ね8pxグリッドに準拠 |
| 一貫性 | ⭐⭐⭐⭐ | フォントウェイト以外は統一 |
| モバイル最適化 | ⭐⭐⭐ | hover依存UIの改善必要 |
| ダイアログ/通知 | ⭐⭐ | confirm/alertの多用 |

## 推奨アクション（優先度順）

### 即時対応（高優先度）
1. **タップターゲットの48px確保** - 全画面共通で`min-h-[48px]`を追加
2. **hover依存UIの改善** - `opacity-0 group-hover:opacity-100`パターンをモバイル対応に変更
3. **confirm()/alert()の置き換え** - カスタムモーダルまたはトースト通知に統一

### 短期対応（中優先度）
4. **フォントウェイトの2種類統一** - font-normal(400)とfont-bold(700)に統一
5. **JournalDetail.tsxに写真ギャラリー追加** - journal.photosの表示がない
6. **パスワード表示切り替え機能** - Login.tsxに追加

### 長期対応（低優先度）
7. **スペーシングの8pxグリッド統一** - 12px、20px等の使用箇所を調整
8. **FABの閉じるアイコン** - rotate-45ではなく×アイコンに変更

---

## 修正対象ファイル一覧

| ファイル | 修正優先度 | 主な問題 |
|----------|------------|----------|
| Dashboard.tsx | 高 | タップターゲット、フォントウェイト |
| JournalCreate.tsx | 高 | タップターゲット、hover依存UI |
| ReservationCreate.tsx | 中 | alert()使用 |
| Customers.tsx | 中 | タップターゲット |
| Settings.tsx | 高 | タップターゲット、hover依存UI、confirm() |
| PreVisitInput.tsx | 低 | 優秀（参考実装） |
| ReservationsCalendar.tsx | 中 | タップターゲット、alert() |
| DogDetail.tsx | 低 | 概ね良好 |
| OwnerDetail.tsx | 低 | aria-label追加 |
| JournalList.tsx | 中 | タップターゲット、alert() |
| JournalDetail.tsx | 中 | タップターゲット、alert()、写真なし |
| Billing.tsx | 中 | confirm()、alert() |
| Help.tsx | 低 | タップターゲット微調整 |
| Layout.tsx | 低 | FABアイコン |
| Login.tsx | 低 | パスワード表示切り替え |
